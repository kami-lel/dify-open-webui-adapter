"""
provide testee text-stream for ``conversation_round_test.py``
"""

import json

ENCODING = "utf-8"


def convert_data_dicts_to_lines(data_dicts):
    opt = []
    for data in data_dicts:
        line = "data: " + json.dumps(data)
        opt.append(line)
    return opt


def convert_lines_to_bytes_generator(lines):
    opt = [line.encoding(ENCODING) for line in lines]
    return iter(opt)


WORKFLOW_DATA1 = [
    {
        "event": "text_chunk",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "text": "FIRST RESPONSE MESSAGE",
            "from_variable_selector": ["4502", "output"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "text": "SECOND RESPONSE MESSAGE",
            "from_variable_selector": ["4502", "output"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "text": "THIRD RESPONSE MESSAGE",
            "from_variable_selector": ["4502", "output"],
        },
    },
    {
        "event": "workflow_finished",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {},
    },
]


WORKFLOW_DATA2 = [
    {
        "event": "workflow_started",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "id": "b790",
            "workflow_id": "1454",
            "inputs": {
                "input": "USER REQUEST MESSAGE",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "4143",
                "sys.workflow_id": "1454",
                "sys.workflow_run_id": "b790",
            },
            "created_at": 1768039728,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "id": "e2c9",
            "node_id": "9657",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768039728,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "id": "e2c9",
            "node_id": "9657",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "input": "test",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "4143",
                "sys.workflow_id": "1454",
                "sys.workflow_run_id": "b790",
                "sys.timestamp": 1768039728,
            },
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "input": "test",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "4143",
                "sys.workflow_id": "1454",
                "sys.workflow_run_id": "b790",
                "sys.timestamp": 1768039728,
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.009636,
            "execution_metadata": None,
            "created_at": 1768039728,
            "finished_at": 1768039728,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "id": "51f130d4-b073-4b5c-bf80-eb36ffbf336e",
            "node_id": "4502",
            "node_type": "template-transform",
            "title": "Template",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768039728,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "text": "FIRST RESPONSE MESSAGE",
            "from_variable_selector": ["4502", "output"],
        },
    },
    {
        "event": "workflow_finished",
        "workflow_run_id": "b790",
        "task_id": "04db",
        "data": {
            "id": "a792",
            "workflow_id": "1454",
            "status": "succeeded",
            "outputs": {"output": "FIRST RESPONSE MESSAGE"},
            "error": None,
            "elapsed_time": 0.158589,
            "total_tokens": 0,
            "total_steps": 3,
            "created_by": {"id": "438b", "user": "user"},
            "created_at": 1768041225,
            "finished_at": 1768041225,
            "exceptions_count": 0,
            "files": [],
        },
    },
]


WORKFLOW_DATA3 = [
    {
        "event": "workflow_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "eb77",
            "workflow_id": "3838",
            "inputs": {
                "input": "USER REQUEST MESSAGE",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "093b",
                "sys.workflow_id": "3838",
                "sys.workflow_run_id": "eb77",
            },
            "created_at": 1768040269,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "023b",
            "node_id": "3642",
            "node_type": "start",
            "title": "Start",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768040269,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "023b",
            "node_id": "3642",
            "node_type": "start",
            "title": "Start",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "input": "USER REQUEST MESSAGE",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "093b",
                "sys.workflow_id": "3838",
                "sys.workflow_run_id": "eb77",
                "sys.timestamp": 1768040268,
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.01455,
            "execution_metadata": None,
            "created_at": 1768040269,
            "finished_at": 1768040269,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "03fa",
            "node_id": "8468",
            "node_type": "http-request",
            "title": "Per File Long Getter",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768040269,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "a1a5",
            "node_id": "6030",
            "node_type": "http-request",
            "title": "Per File Short Getter",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768040269,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "a1a5",
            "node_id": "6030",
            "node_type": "http-request",
            "title": "Per File Short Getter",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {
                "request": (
                    "GET /kaye/dify-app/kaye-commit-sense/per-file-short"
                    " HTTP/1.1\r\nHost: 10.4.4.7:11255\r\n\r\n"
                )
            },
            "process_data_truncated": False,
            "outputs": {
                "status_code": 200,
                "body": "FIRST SYSTEM PROMPT",
                "headers": {
                    "server": "Werkzeug/3.1.5 Python/3.12.12",
                    "date": "Sat, 10 Jan 2026 10:17:49 GMT",
                    "content-type": "text/html; charset=utf-8",
                    "content-length": "2463",
                    "cache-status": "65fc63fef8ff;fwd=stale;detail=match",
                    "via": "1.1 65fc63fef8ff (squid/6.13)",
                    "connection": "keep-alive",
                },
                "files": [],
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.086713,
            "execution_metadata": None,
            "created_at": 1768040269,
            "finished_at": 1768040269,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "65cf1242-4b7d-48fe-8c10-d8d6ae0bc0c0",
            "node_id": "1767896024342",
            "node_type": "http-request",
            "title": "GET primary message prompt",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768040269,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "03fa",
            "node_id": "8468",
            "node_type": "http-request",
            "title": "Per File Long Getter",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {
                "request": (
                    "GET /kaye/dify-app/kaye-commit-sense/per-file-long"
                    " HTTP/1.1\r\nHost: 10.4.4.7:11255\r\n\r\n"
                )
            },
            "process_data_truncated": False,
            "outputs": {
                "status_code": 200,
                "body": "SECOND SYSTEM PROMPT",
                "headers": {
                    "server": "Werkzeug/3.1.5 Python/3.12.12",
                    "date": "Sat, 10 Jan 2026 10:17:49 GMT",
                    "content-type": "text/html; charset=utf-8",
                    "content-length": "2462",
                    "cache-status": "65fc63fef8ff;fwd=stale;detail=match",
                    "via": "1.1 65fc63fef8ff (squid/6.13)",
                    "connection": "keep-alive",
                },
                "files": [],
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.111779,
            "execution_metadata": None,
            "created_at": 1768040269,
            "finished_at": 1768040269,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "65cf1242-4b7d-48fe-8c10-d8d6ae0bc0c0",
            "node_id": "1767896024342",
            "node_type": "http-request",
            "title": "GET primary message prompt",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {
                "request": (
                    "GET /kaye/dify-app/kaye-commit-sense/primary-message"
                    " HTTP/1.1\r\nHost: 10.4.4.7:11255\r\n\r\n"
                )
            },
            "process_data_truncated": False,
            "outputs": {
                "status_code": 200,
                "body": "THIRD SYSTEM PROMPT",
                "headers": {
                    "server": "Werkzeug/3.1.5 Python/3.12.12",
                    "date": "Sat, 10 Jan 2026 10:17:49 GMT",
                    "content-type": "text/html; charset=utf-8",
                    "content-length": "1373",
                    "cache-status": "65fc63fef8ff;fwd=stale;detail=match",
                    "via": "1.1 65fc63fef8ff (squid/6.13)",
                    "connection": "keep-alive",
                },
                "files": [],
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.091595,
            "execution_metadata": None,
            "created_at": 1768040269,
            "finished_at": 1768040269,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "iteration_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "7114",
            "node_id": "7114",
            "node_type": "iteration",
            "title": "Iteration",
            "created_at": 1768040269,
            "extras": {},
            "metadata": {"iteration_length": 2},
            "inputs": {"iterator_selector": ["FIRST_ITER", "SECOND_ITER"]},
            "inputs_truncated": False,
        },
    },
    {
        "event": "iteration_next",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "7114",
            "node_id": "7114",
            "node_type": "iteration",
            "title": "Iteration",
            "index": 0,
            "created_at": 1768040269,
            "extras": {},
        },
    },
    {
        "event": "iteration_completed",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "7114",
            "node_id": "7114",
            "node_type": "iteration",
            "title": "Iteration",
            "outputs": {
                "output": [
                    {
                        "symbol": "|",
                        "summary": (
                            "add optional iter_lines_override param to"
                            " _ConversationRound init for unit test injection,"
                            " enabling custom iter_lines setup"
                        ),
                    },
                    {
                        "symbol": "^",
                        "summary": (
                            "add new test file conversation_round_test.py with"
                            " placeholder tests and initial stream processing"
                            " test for _ConversationRound"
                        ),
                    },
                ]
            },
            "outputs_truncated": False,
            "created_at": 1768040271,
            "extras": {},
            "inputs": {"iterator_selector": ["FIRST_ITER", "SECOND_ITER"]},
            "inputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 1.81476,
            "total_tokens": 1828,
            "execution_metadata": {
                "total_tokens": 1828,
                "total_price": "0.0007996",
                "currency": "USD",
                "iteration_duration_map": {"1": 1.473738, "0": 1.77923},
            },
            "finished_at": 1768040271,
            "steps": 2,
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "text": "FIRST RESPONSE MESSAGE",
            "from_variable_selector": ["0596", "output"],
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "39df",
            "node_id": "6076",
            "node_type": "end",
            "title": "End",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768041456,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "39df",
            "node_id": "6076",
            "node_type": "end",
            "title": "End",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {"output": "FIRST RESPONSE MESSAGE"},
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {"output": "FIRST RESPONSE MESSAGE"},
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.018752,
            "execution_metadata": None,
            "created_at": 1768041456,
            "finished_at": 1768041456,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "workflow_finished",
        "workflow_run_id": "eb77",
        "task_id": "f44f",
        "data": {
            "id": "5b0d",
            "workflow_id": "3838",
            "status": "succeeded",
            "outputs": {"output": "FIRST RESPONSE MESSAGE"},
            "error": None,
            "elapsed_time": 2.45279,
            "total_tokens": 2684,
            "total_steps": 12,
            "created_by": {"id": "1dac", "user": "user"},
            "created_at": 1768041454,
            "finished_at": 1768041456,
            "exceptions_count": 0,
            "files": [],
        },
    },
]


WORKFLOW_DATA4 = [
    {
        "event": "workflow_started",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "c653",
            "workflow_id": "e193",
            "inputs": {
                "input": "Tell me a Short Story",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "4143",
                "sys.workflow_id": "e193",
                "sys.workflow_run_id": "c653",
            },
            "created_at": 1768043050,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "f574",
            "node_id": "1768038979657",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768043050,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "f574",
            "node_id": "1768038979657",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "input": "Tell me a Short Story",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "4143",
                "sys.workflow_id": "e193",
                "sys.workflow_run_id": "c653",
                "sys.timestamp": 1768043050,
            },
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "input": "Tell me a Short Story",
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "4143",
                "sys.workflow_id": "e193",
                "sys.workflow_run_id": "c653",
                "sys.timestamp": 1768043050,
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.011594,
            "execution_metadata": None,
            "created_at": 1768043050,
            "finished_at": 1768043050,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "fb22",
            "node_id": "5330",
            "node_type": "llm",
            "title": "LLM",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768043050,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": "Once",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " upon",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " a",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " time",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ",",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " in",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " a",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " quiet",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " village",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " nestled",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " between",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " rolling",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " hills",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ",",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " there",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " lived",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " a",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " curious",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " young",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " girl",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " named",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " Lily",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ".",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " Every",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " day",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ",",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " she",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " explored",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " the",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " me",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": "adows",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ",",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " collecting",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " wild",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": "flowers",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " and",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " listening",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " to",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " the",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " songs",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " of",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " birds",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ".\n\n",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": "The",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " fair",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": "ies",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " welcomed",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " Lily",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " with",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " smiles",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " and",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " showed",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " her",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " their",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " magical",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": " garden",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "text_chunk",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "text": ".",
            "from_variable_selector": ["5330", "text"],
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "fb22",
            "node_id": "5330",
            "node_type": "llm",
            "title": "LLM",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {
                "model_mode": "chat",
                "prompts": [{
                    "role": "user",
                    "text": "Tell me a Short Story",
                    "files": [],
                }],
                "usage": {
                    "prompt_tokens": 12,
                    "prompt_unit_price": "0.1",
                    "prompt_price_unit": "0.000001",
                    "prompt_price": "0.0000012",
                    "completion_tokens": 192,
                    "completion_unit_price": "0.4",
                    "completion_price_unit": "0.000001",
                    "completion_price": "0.0000768",
                    "total_tokens": 204,
                    "total_price": "0.000078",
                    "currency": "USD",
                    "latency": 1.619,
                    "time_to_first_token": 0.718,
                    "time_to_generate": 0.901,
                },
                "finish_reason": "stop",
                "model_provider": "langgenius/openai/openai",
                "model_name": "gpt-4.1-nano",
            },
            "process_data_truncated": False,
            "outputs": {
                "text": (
                    "Once upon a time, in a quiet village nestled between"
                    " rolling hills, there lived a curious young girl named"
                    " Lily. Every day, she explored the meadows, collecting"
                    " wildflowers and listening to the songs of birds.\n\nThe"
                    " fairies welcomed Lily with smiles and showed her their"
                    " magical garden."
                ),
                "reasoning_content": "",
                "usage": {
                    "prompt_tokens": 12,
                    "prompt_unit_price": "0.1",
                    "prompt_price_unit": "0.000001",
                    "prompt_price": "0.0000012",
                    "completion_tokens": 192,
                    "completion_unit_price": "0.4",
                    "completion_price_unit": "0.000001",
                    "completion_price": "0.0000768",
                    "total_tokens": 204,
                    "total_price": "0.000078",
                    "currency": "USD",
                    "latency": 1.619,
                    "time_to_first_token": 0.718,
                    "time_to_generate": 0.901,
                },
                "finish_reason": "stop",
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 1.794752,
            "execution_metadata": {
                "total_tokens": 204,
                "total_price": "0.000078",
                "currency": "USD",
            },
            "created_at": 1768043050,
            "finished_at": 1768043052,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "e60c43d7-0d36-482a-9fca-45db0db92a82",
            "node_id": "1768039028104",
            "node_type": "end",
            "title": "Output",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768043052,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "e60c43d7-0d36-482a-9fca-45db0db92a82",
            "node_id": "1768039028104",
            "node_type": "end",
            "title": "Output",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "output": (
                    "Once upon a time, in a quiet village nestled between"
                    " rolling hills, there lived a curious young girl named"
                    " Lily. Every day, she explored the meadows, collecting"
                    " wildflowers and listening to the songs of birds.\n\nThe"
                    " fairies welcomed Lily with smiles and showed her their"
                    " magical garden."
                )
            },
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "output": (
                    "Once upon a time, in a quiet village nestled between"
                    " rolling hills, there lived a curious young girl named"
                    " Lily. Every day, she explored the meadows, collecting"
                    " wildflowers and listening to the songs of birds.\n\nThe"
                    " fairies welcomed Lily with smiles and showed her their"
                    " magical garden."
                )
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.054735,
            "execution_metadata": None,
            "created_at": 1768043052,
            "finished_at": 1768043052,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "workflow_finished",
        "workflow_run_id": "c653",
        "task_id": "d476",
        "data": {
            "id": "c653",
            "workflow_id": "e193",
            "status": "succeeded",
            "outputs": {
                "output": (
                    "Once upon a time, in a quiet village nestled between"
                    " rolling hills, there lived a curious young girl named"
                    " Lily. Every day, she explored the meadows, collecting"
                    " wildflowers and listening to the songs of birds.\n\nThe"
                    " fairies welcomed Lily with smiles and showed her their"
                    " magical garden."
                )
            },
            "error": None,
            "elapsed_time": 1.871219,
            "total_tokens": 204,
            "total_steps": 3,
            "created_by": {
                "id": "e615af1b-92b0-4368-ad99-f9cc442d438b",
                "user": "user",
            },
            "created_at": 1768043050,
            "finished_at": 1768043052,
            "exceptions_count": 0,
            "files": [],
        },
    },
]


WORKFLOW_ANSWER4 = [
    "Once",
    " upon",
    " a",
    " time",
    ",",
    " in",
    " a",
    " quiet",
    " village",
    " nestled",
    " between",
    " rolling",
    " hills",
    ",",
    " there",
    " lived",
    " a",
    " curious",
    " young",
    " girl",
    " named",
    " Lily",
    ".",
    " Every",
    " day",
    ",",
    " she",
    " explored",
    " the",
    " me",
    "adows",
    ",",
    " collecting",
    " wild",
    "flowers",
    " and",
    " listening",
    " to",
    " the",
    " songs",
    " of",
    " birds",
    ".\n\n",
    "The",
    " fair",
    "ies",
    " welcomed",
    " Lily",
    " with",
    " smiles",
    " and",
    " showed",
    " her",
    " their",
    " magical",
    " garden",
    ".",
]

CHATFLOW_DATA1 = [
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "FIRST RESPONSE MESSAGE",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "SECOND RESPONSE MESSAGE",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "THIRD RESPONSE MESSAGE",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "workflow_finished",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {},
    },
]


CHATFLOW_DATA2 = [
    {
        "event": "workflow_started",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "561d",
            "workflow_id": "6d8e",
            "inputs": {
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "bee4",
                "sys.workflow_id": "6d8e",
                "sys.workflow_run_id": "561d",
                "sys.query": "FIRST USER REQUEST",
                "sys.dialogue_count": 1,
            },
            "created_at": 1768046345,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "5368",
            "node_id": "1768045547362",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768046345,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "5368",
            "node_id": "1768045547362",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "bee4",
                "sys.workflow_id": "6d8e",
                "sys.workflow_run_id": "561d",
                "sys.query": "Give Me A Short Introduction",
                "sys.conversation_id": "c0cf",
                "sys.dialogue_count": 1,
            },
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "bee4",
                "sys.workflow_id": "6d8e",
                "sys.workflow_run_id": "561d",
                "sys.query": "Give Me A Short Introduction",
                "sys.conversation_id": "c0cf",
                "sys.dialogue_count": 1,
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.008951,
            "execution_metadata": None,
            "created_at": 1768046345,
            "finished_at": 1768046345,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "8c24",
            "node_id": "llm",
            "node_type": "llm",
            "title": "LLM",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768046345,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "Hello",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "!",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " I'm",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " here",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " to",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " assist",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " you",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " with",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " any",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " questions",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " or",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " tasks",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " you",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " have",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": ".",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " Feel",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " free",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " to",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " ask",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " me",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": " anything",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "!",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "message",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "id": "ff06",
        "answer": "",
        "from_variable_selector": ["llm", "text"],
    },
    {
        "event": "node_finished",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "8c24",
            "node_id": "llm",
            "node_type": "llm",
            "title": "LLM",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {
                "model_mode": "chat",
                "prompts": [
                    {
                        "role": "user",
                        "text": "Give Me A Short Introduction",
                        "files": [],
                    },
                    {
                        "role": "user",
                        "text": "Give Me A Short Introduction\n\n",
                        "files": [],
                    },
                ],
                "usage": {
                    "prompt_tokens": 26,
                    "prompt_unit_price": "0.1",
                    "prompt_price_unit": "0.000001",
                    "prompt_price": "0.0000026",
                    "completion_tokens": 22,
                    "completion_unit_price": "0.4",
                    "completion_price_unit": "0.000001",
                    "completion_price": "0.0000088",
                    "total_tokens": 48,
                    "total_price": "0.0000114",
                    "currency": "USD",
                    "latency": 0.487,
                    "time_to_first_token": 0.372,
                    "time_to_generate": 0.115,
                },
                "finish_reason": "stop",
                "model_provider": "langgenius/openai/openai",
                "model_name": "gpt-4.1-nano",
            },
            "process_data_truncated": False,
            "outputs": {
                "text": (
                    "Hello! I'm here to assist you with any questions or tasks"
                    " you have. Feel free to ask me anything!"
                ),
                "reasoning_content": "",
                "usage": {
                    "prompt_tokens": 26,
                    "prompt_unit_price": "0.1",
                    "prompt_price_unit": "0.000001",
                    "prompt_price": "0.0000026",
                    "completion_tokens": 22,
                    "completion_unit_price": "0.4",
                    "completion_price_unit": "0.000001",
                    "completion_price": "0.0000088",
                    "total_tokens": 48,
                    "total_price": "0.0000114",
                    "currency": "USD",
                    "latency": 0.487,
                    "time_to_first_token": 0.372,
                    "time_to_generate": 0.115,
                },
                "finish_reason": "stop",
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.632794,
            "execution_metadata": {
                "total_tokens": 48,
                "total_price": "0.0000114",
                "currency": "USD",
            },
            "created_at": 1768046345,
            "finished_at": 1768046345,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "19f7",
            "node_id": "answer",
            "node_type": "answer",
            "title": "Answer",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768046345,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "19f7",
            "node_id": "answer",
            "node_type": "answer",
            "title": "Answer",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "answer": (
                    "Hello! I'm here to assist you with any questions or tasks"
                    " you have. Feel free to ask me anything!"
                ),
                "files": [],
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.018595,
            "execution_metadata": None,
            "created_at": 1768046345,
            "finished_at": 1768046345,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "workflow_finished",
        "conversation_id": "c0cf",
        "message_id": "ff06",
        "created_at": 1768046345,
        "task_id": "5863",
        "workflow_run_id": "561d",
        "data": {
            "id": "561d",
            "workflow_id": "6d8e",
            "status": "succeeded",
            "outputs": {
                "answer": (
                    "Hello! I'm here to assist you with any questions or tasks"
                    " you have. Feel free to ask me anything!"
                ),
                "files": [],
            },
            "error": None,
            "elapsed_time": 0.667895,
            "total_tokens": 48,
            "total_steps": 3,
            "created_by": {
                "id": "929b",
                "user": "user",
            },
            "created_at": 1768046345,
            "finished_at": 1768046345,
            "exceptions_count": 0,
            "files": [],
        },
    },
]


CHATFLOW_ANSWER2 = [
    "Hello",
    "!",
    " I'm",
    " here",
    " to",
    " assist",
    " you",
    " with",
    " any",
    " questions",
    " or",
    " tasks",
    " you",
    " have",
    ".",
    " Feel",
    " free",
    " to",
    " ask",
    " me",
    " anything",
    "!",
    "",
    "",
]


CHATFLOW_DATA3 = [
    {
        "event": "workflow_started",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "5a61",
            "workflow_id": "86be",
            "inputs": {
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "9985",
                "sys.workflow_id": "86be",
                "sys.workflow_run_id": "5a61",
                "sys.query": "USER REQUEST CONTENT",
                "sys.dialogue_count": 2,
            },
            "created_at": 1768047198,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "f115",
            "node_id": "1766694234003",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768047198,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "f115",
            "node_id": "1766694234003",
            "node_type": "start",
            "title": "User Input",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "9985",
                "sys.workflow_id": "86be",
                "sys.workflow_run_id": "5a61",
                "sys.query": "USER REQUEST CONTENT",
                "sys.conversation_id": "8b3b",
                "sys.dialogue_count": 2,
            },
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "sys.files": [],
                "sys.user_id": "user",
                "sys.app_id": "9985",
                "sys.workflow_id": "86be",
                "sys.workflow_run_id": "5a61",
                "sys.query": "USER REQUEST CONTENT",
                "sys.conversation_id": "8b3b",
                "sys.dialogue_count": 2,
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.00979,
            "execution_metadata": None,
            "created_at": 1768047198,
            "finished_at": 1768047198,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "9d6a",
            "node_id": "1793",
            "node_type": "if-else",
            "title": "has cached Pre-Sense Prompt",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768047198,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "9d6a",
            "node_id": "1793",
            "node_type": "if-else",
            "title": "has cached Pre-Sense Prompt",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {
                "conditions": [{
                    "actual_value": "",
                    "expected_value": "",
                    "comparison_operator": "not empty",
                }]
            },
            "inputs_truncated": False,
            "process_data": {
                "condition_results": [{
                    "group": {
                        "case_id": "true",
                        "logical_operator": "and",
                        "conditions": [{
                            "variable_selector": [
                                "conversation",
                                "pre_sense_prompt_cache",
                            ],
                            "comparison_operator": "not empty",
                            "value": "",
                            "sub_variable_condition": None,
                        }],
                    },
                    "results": [False],
                    "final_result": False,
                }]
            },
            "process_data_truncated": False,
            "outputs": {"result": False, "selected_case_id": "False"},
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.02039,
            "execution_metadata": None,
            "created_at": 1768047198,
            "finished_at": 1768047198,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "6146",
            "node_id": "6854",
            "node_type": "llm",
            "title": "LLM I",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768047200,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": "BST",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " algorithm",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": ":",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": "  \n",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": "-",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " **",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": "Insert",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": ":**",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " Compare",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " value",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": ",",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " go",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " left",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " if",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " smaller",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": ",",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " right",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " if",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " larger",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": ",",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " until",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " None",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": ",",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " insert",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "message",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "id": "74a6",
        "answer": " node",
        "from_variable_selector": ["6854", "text"],
    },
    {
        "event": "node_finished",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "6146",
            "node_id": "6854",
            "node_type": "llm",
            "title": "LLM I",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {
                "model_mode": "chat",
                "prompts": [
                    {
                        "role": "system",
                        "text": "SYSTEM PROMPT",
                        "files": [],
                    },
                    {
                        "role": "user",
                        "text": "USER REQUEST CONTENT",
                        "files": [],
                    },
                    {
                        "role": "assistant",
                        "text": (
                            "A Binary Search Tree (BST) is a binary tree where"
                            " each node has at most two children, with the"
                            " left child containing values less than the"
                            " parent, and the right child containing values"
                            " greater than the parent. The BST algorithm"
                            " involves:\n\n1. **Insertion:** Starting at the"
                            " root, compare the new value with the current"
                            " node; move left if smaller, right if larger,"
                            " until reaching a None position, then insert the"
                            " new node.\n2. **Search:** Begin at the root,"
                            " compare the target value; traverse left or right"
                            " based on comparison, repeating until the value"
                            " is found or a None node is reached.\n3."
                            " **Deletion:** Find the node to delete; if it has"
                            " no children, remove it; if one child, replace it"
                            " with its child; if two children, replace it with"
                            " its in-order successor or predecessor, then"
                            " delete that node.\n\nBSTs support efficient"
                            " average-case operations like search, insert, and"
                            " delete in O(log n) time."
                        ),
                        "files": [],
                    },
                ],
                "usage": {
                    "prompt_tokens": 1391,
                    "prompt_unit_price": "0.1",
                    "prompt_price_unit": "0.000001",
                    "prompt_price": "0.0001391",
                    "completion_tokens": 73,
                    "completion_unit_price": "0.4",
                    "completion_price_unit": "0.000001",
                    "completion_price": "0.0000292",
                    "total_tokens": 1464,
                    "total_price": "0.0001683",
                    "currency": "USD",
                    "latency": 1.379,
                    "time_to_first_token": 1.004,
                    "time_to_generate": 0.376,
                },
                "finish_reason": "stop",
                "model_provider": "langgenius/openai/openai",
                "model_name": "gpt-4.1-nano",
            },
            "process_data_truncated": False,
            "outputs": {
                "text": (
                    "BST algorithm:  \n- **Insert:** Compare value, go left if"
                    " smaller, right if larger, until None, insert node  \n-"
                    " **Search:** Compare target, traverse left or right,"
                    " repeat until found or None  \n- **Delete:** Remove node:"
                    " no child (delete), one child (replace), two children"
                    " (replace with in-order successor/predecessor)"
                ),
                "reasoning_content": "",
                "usage": {
                    "prompt_tokens": 1391,
                    "prompt_unit_price": "0.1",
                    "prompt_price_unit": "0.000001",
                    "prompt_price": "0.0001391",
                    "completion_tokens": 73,
                    "completion_unit_price": "0.4",
                    "completion_price_unit": "0.000001",
                    "completion_price": "0.0000292",
                    "total_tokens": 1464,
                    "total_price": "0.0001683",
                    "currency": "USD",
                    "latency": 1.379,
                    "time_to_first_token": 1.004,
                    "time_to_generate": 0.376,
                },
                "finish_reason": "stop",
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 1.552477,
            "execution_metadata": {
                "total_tokens": 1464,
                "total_price": "0.0001683",
                "currency": "USD",
            },
            "created_at": 1768047200,
            "finished_at": 1768047201,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "node_started",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "4cb7",
            "node_id": "3412",
            "node_type": "answer",
            "title": "Answer I",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": None,
            "inputs_truncated": False,
            "created_at": 1768047201,
            "extras": {},
            "iteration_id": None,
            "loop_id": None,
            "agent_strategy": None,
        },
    },
    {
        "event": "node_finished",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "4cb7",
            "node_id": "3412",
            "node_type": "answer",
            "title": "Answer I",
            "index": 1,
            "predecessor_node_id": None,
            "inputs": {},
            "inputs_truncated": False,
            "process_data": {},
            "process_data_truncated": False,
            "outputs": {
                "answer": (
                    "BST algorithm:  \n- **Insert:** Compare value, go left if"
                    " smaller, right if larger, until None, insert node"
                ),
                "files": [],
            },
            "outputs_truncated": False,
            "status": "succeeded",
            "error": None,
            "elapsed_time": 0.030625,
            "execution_metadata": None,
            "created_at": 1768047201,
            "finished_at": 1768047201,
            "files": [],
            "iteration_id": None,
            "loop_id": None,
        },
    },
    {
        "event": "workflow_finished",
        "conversation_id": "8b3b",
        "message_id": "74a6",
        "created_at": 1768047199,
        "task_id": "1993",
        "workflow_run_id": "5a61",
        "data": {
            "id": "5a61",
            "workflow_id": "86be",
            "status": "succeeded",
            "outputs": {
                "answer": (
                    "BST algorithm:  \n- **Insert:** Compare value, go left if"
                    " smaller, right if larger, until None, insert node"
                ),
                "files": [],
            },
            "error": None,
            "elapsed_time": 2.995029,
            "total_tokens": 1866,
            "total_steps": 11,
            "created_by": {
                "id": "d25c",
                "user": "user",
            },
            "created_at": 1768047198,
            "finished_at": 1768047201,
            "exceptions_count": 0,
            "files": [],
        },
    },
]


CHATFLOW_ANSWER3 = [
    "BST",
    " algorithm",
    ":",
    "  \n",
    "-",
    " **",
    "Insert",
    ":**",
    " Compare",
    " value",
    ",",
    " go",
    " left",
    " if",
    " smaller",
    ",",
    " right",
    " if",
    " larger",
    ",",
    " until",
    " None",
    ",",
    " insert",
    " node",
]
